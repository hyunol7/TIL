스케줄 쿼리
==

### 스퀘줄 쿼리
+ 사용하는 상황
  + 지속적으로 쿼리를 실핼해야 하는 경우
  + 쿼리의 연산이 오래 걸려서 미리 BigQuery Table로 저장하고 싶은 경우
+ 사전 작업
  + BigQuery Data Transfer Service API 사용 > 마트 : 원하는 것을 쉽게 구매 > 대충 쉽게 구현하겠다는 


### append / overrite
+ 테이블 추가 > append > 중복이 생길 수가 있다
+ 테이블 덮어쓰기 > overrite > 데이터 전체를 가져와야해서 시간이 많이 들어간다
  + DML > 중복을 처리하는 쿼리 / MERGE > 중복이 있으면 덮어쓰기 없으면 추가
+ 백필 예약 : 특정 일자 기준으로 쿼리를 실행하는 작업 / 과거 데이터를 가져오고 싶을 때
    + 매개변수 
+ DAU : 접속
+ 실행 시점에 필터링하고 싶다면
  + 쿼리에서 @run_time 또는 @run_date를 사용할 수 있음
  + @run_time : 실행하기로 했던 시간(TIMESTAMP)
  + @run_date : 실행하기로 했던 날의 날짜(DATE)
+ 주의할 점
  + 쿼리에서 CURRENT_DATE() 등을 사용할 경우 => 시간이 지나면서 점점 데이터 탐색양이 많아질 수 있음(비용 부과)
  + 디버깅 등이 불편하기 때문에 데이터 엔지니어링 조직이 있다면 Airflow등을 사용하는 것으로 하고, 개발 조직이 아닌 경우에 스케줄 쿼리를 사용하기도 함
  + 스케줄 쿼리 네이밍 규칙이 있으면 좋은. 마음대로 이름을 생성해서 추후에 관리가 어려워지는 경우도 존재함
+ 예약된 쿼리
+ 백필 예약
+ 스케줄 쿼리 vs 연결된 시트의 스케줄
  + 스케줄 쿼리 결과를 시트로 가져와 
