리텐션
===

### 리텐션 분석의 큰 흐름
+ 코어 이벤트가 뭐였지? 이 앱이 해결하려는 것이 뭐였지? 하는 것을 파악해야함
+ 실제 = 바람 예상의 차이를 파악해야한다
   + Daily : 카톡, 알람 앱일 / Weekly / Monthly > 사용자의 주기를 파악
+ 리텐션 커브 : 가파른 그래프이거나, 완만한 곡선이거나 이것을 해석을 하는 것이다
  + Product Market Fit : 도달이 되었는지가 중요한 부분이다.
  + 평평해지는 시점이 며칠 뒤인지를 파악하고, 평평해 지는 시점이 빠르면 좋다, Ex> Day의 리텐션을 높이는 것이 좋다
+ 코호트 : 특정 집단이 더 많이 사용할까? 를 찾아내는 것이다.
   + 연령별, 국가별, 지역별 > 특정 경험여부에 따라 유저의 행동을 파악할 수도 있다 Ex> 검색 여부, 송금 여부
  + 유저를 쪼개서 생각해보자 > 기존 유저를 위한 이벤트를 설정해보자 / 신규 유저를 위한 이벤트를 설정해보자(WAU)
  + 추가분석을 빨리 처리할 수록 좋다 / 쿼리를 잘 짜두는 것이 좋다

![image](https://github.com/user-attachments/assets/70e37e6b-2959-4743-b405-a7872661348e)


### 리텐션
+ 시간이 흐르면서 다시 제품(앱, 웹)을 사용하는지를 측정하는 지표
+ 시간이 흐르면서 계속 제품을 다시 사용하는 리텐션이 높은 서비스도 있고, 1회만 사용해서 재사용이 적은 리텐션이 낮은 서비스도 존재
+ 고객의 특성(유료, 무료)마다 리텐션 그래프가 다르게 나올 수 있음
   + 리텐션을 보려면 오래 걸린다 > 모든 서비스에서 중요하지만 코어 서비스를 보는 것이 더 정확하다 하지만 서비스의 특성에 따라 다르다
   + 회사에 따라서 지표를 어떻게 하는지에 따라서 중요도가 바뀐다
+ PMF(Product Market Fit)을 찾았는가?를 생각할 때 리텐션 커브를 그려보고 판단
    + PMF : 제품이 고객의 핵심 문제 상황을 효과적으로 해결할 경우
    + 평평한 곳이 유지가 되면 PMF를 찾았다고 보곤 함

### Retaib의 정의가 필요함
+  주기에 따라 관점이 달라질 수 있음 (슈퍼앱)
    + 접속 주기가  긴 서비스가 존재함. 이런 서비스들은 어떻게 해야 할까?
    + 하나의 제품에서 여러 페르소나가 있는 경우 팀마다 다른 주기로 리텐션을 볼 수도 있음
+ 우리가 생각한 주기가 실제랑 같은지 파악하기
+ Retention은 Output Metric(DAU)임 => 원인을 파악하기 위해선 구체적으로 쪼개보는 작업이 필요

### 제품의 핵심
+ 우리 제품은 고객의 어떤 문제를 해결하려고 하는가?
+ 핵심 이벤트는 무엇인가?
    + 제품이 고도화되었으면, 하나의 제품에도 여러 페르소나(이벤트) 이벤트가 존재할 수 있음
   + 회사 규모가 크고 오래될 수록 제계적이다 / 조직이 나뉘어 있다
+ eX> 소셜 앱 : 피드를 본다 / 음식 주문 앱 : 음식을 주문한다 / 택시 앱 : 택시를 탑승한다

+ 리텐션 그래프를 구할 때
    + 핵심 이벤트(Core Event)를 Retain으로 생각하는 것 (지표가 낮아져 앱 접속을 확인한다)
    + 앱 접속을 Retain으로 생각하는 것 (지표가 높아진다)
+ 핵심 이벤트 리텐션 : 값이 낮을 수 있음
### 제품의 사용 주기 확인하기
+ 예상하는 사용 주기 떠올리기
   + 고객은 이 문제를 얼마나 겪는가? 어떤 빈도로 겪는가?
   + 예상한 주기와 실제 주기가 일치하는지 파악 : 잘못 생각하는 경우도 존재
+ 최근 28일의 접속일 확인하기 : 간단하고 빠르게 파악할 수 있음
+ 평균 사용 주기 확인하기
   + 2번 이상 사용한 사람들의 평균 사용 주기 구하기
  + 만약 유저의 첫 사용 주기(윈도우 함수 사용 사용자의 첫 사용날을 찾는다)의 간격을 알고 싶다면 첫 사용과 다음 사용의 간격을 계산

### 제품의 사용 주기 확인하기
+ 1주 간격으로 왼쪽 오른쪽을 확인하고 고민을 한다
![image](https://github.com/user-attachments/assets/5cc7b129-c194-438c-81df-18a60cdb460e)

### 리텐션의 종류
+ Classic 리텐션(N day 리텐션)
    + 사용자가 최초로 “참여”한 Day 0 이후, 각 Day N 별로 한 번 더 “참여”했는지 계산
    + 제일 보수적인 접근. 낮은 값이 나올 수 있음
      ![image](https://github.com/user-attachments/assets/67e60b04-9b59-431e-b6bf-547def3c9d9b)

+ Range 리텐션(Bracket 리텐션)
    + WEEKLY에서 많이 사용된다
    + Day N이 아닌 특정 Range 내에서 더 “참여”했는지 계산
    + 일 ~ 토이 있으면 이번주에 들어왔는지 안 들어왔는지 확인 datetrunk 사용
    + 제일 유연하고, 실용적인 관점
      ![image](https://github.com/user-attachments/assets/2d7c8cd4-9821-4c13-b1c5-b7e34f2da681)

+  Rolling 리텐션(Unbounded 리텐션)
   + Day N 이후에 한 번이라도 “참여”한 경우를 그 동안을 모두 참여했다고 간주
   + 가장 낙관적인 접근. 높은 값이 나올 수 있음
   + 최근에 어떤 유저가 참여하면 과거에 본 데이터가 달라질 수 있음
![image](https://github.com/user-attachments/assets/93aff551-8155-4cb1-9b97-93f1082f88f7)

### 리텐션 선택 기준
+ Classic 리텐션
    + 사용자가 제품을 정기적으로 사용하는 경우(매일 음식 기록 등)
    + 마케팅 캠페인을 한 후, 반응을 하루 단위로 보고 싶은 경우
+ Range 리텐션
    + 주차별 범위를 만들어서 계속 사용하는지 확인하고 싶은 경우
    + 제일 실용적인 관점이라 생각해 이 리텐션을 제일 많이 활용
+ Rolling 리텐션
  + 언제 다시 돌아올 것 같은지 예상되지 않는 경우
  + 장기적인 관점으로 데이터를 볼 경우, 사용 주기가 긴 경우

### 리텐션 커브 그래프
+ 위로 올라가면 좋은 것
+ 면적이 넓을 수록 좋은 것 / 어떻게 평평하게 만들까?
![image](https://github.com/user-attachments/assets/05aed758-0c7b-4c32-9f03-e1f61f30a105)

### 리텐션 분석을 위한 Small Data
+ 사용자 행동 데이터, 행동 로그
+ 필요한 데이터
  + user_id / event_name / event_datetime
+ 리텐션
  + N Day Retention / Weekly Range Retention
![image](https://github.com/user-attachments/assets/1968a929-12e4-485b-906f-281197fd321b)


### 우리가 기대하는 리텐션 Output
![image](https://github.com/user-attachments/assets/a0641589-5d91-42f8-ac51-d3be8dea679d)
![image](https://github.com/user-attachments/assets/b700be95-0a1e-43e5-bee3-50f8b17c2176)
![image](https://github.com/user-attachments/assets/512209b8-c05e-496a-a343-6d364d74877c)
![image](https://github.com/user-attachments/assets/337e9285-4264-47a3-90e6-a5e9f18a20b3)

------------
> ISOWEEK
> 연도가 바뀌거나 월이 바뀔 떄, 이슈가 생긴다
> 

--------



